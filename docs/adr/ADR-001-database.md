# ADR-001: Переход от встроенного словаря к полноценной базе данных
Дата: 2025-10-15  
Статус: Accepted

## Context
На текущий момент данные о желаниях хранятся в памяти (в словаре `_DB`).
Помимо того что это непрактично, база данных необходима в рамках выполнения ДЗ.

Рассматривались варианты:
- SQLite — встроенная, проста в использовании, не требует отдельного сервера.
- PostgreSQL — надёжная, промышленная, поддерживает типы, транзакции, индексы.
- MongoDB — гибкая, но требует отдельной инфраструктуры и не гарантирует схему.

## Decision
Будем использовать **SQLite** в качестве основной базы данных.
Подключение через `SQLAlchemy`, файл БД будет храниться в `data/wishlist.db`.
Реализация будет интегрирована в проект с использованием SQLAlchemy ORM для удобства и безопасности.

## Consequences
**Плюсы:**
- Данные сохраняются между перезапусками.
- Появляется возможность фильтрации и сортировки.
- Легко тестировать локально.

**Минусы:**
- SQLite не подходит для высокой конкурентности.
- Придётся реализовать слой ORM и миграции.

## Security impact
Использование SQLite через SQLAlchemy снижает риск потери данных и повреждения состояния при перезапуске приложения. За счёт использования ORM исключаются SQL-инъекции.

## Rollout plan #21

## Links
- NFR-03 (пропускная способность, стабильность)
- F5/R4 (гонки при параллельных POST/DELETE)
